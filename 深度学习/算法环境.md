## 基于Ubuntu22.04环境


### 安装 nvidia-smi、cuda

```shell
# 官网地址 https://developer.nvidia.com/cuda-11-7-1-download-archive?target_os=Linux&target_arch=x86_64&Distribution=Ubuntu
# 版本必须对应，建议在项目中提供对应版本的deb包
$ wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/cuda-keyring_1.0-1_all.deb
$ sudo dpkg -i cuda-keyring*.deb
$ sudo apt-get update
$ sudo apt-get -y install cuda

$ vim ~/.bashrc
# 在文件末尾添加下面两行
# export PATH=/usr/local/cuda/bin${PATH:+:${PATH}}
# export LD_LIBRARY_PATH=/usr/local/cuda/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}

$ source ~/.bashrc # 更新环境变量

$ nvcc -V # 验证是否安装成功

```


### 安装 conda

```shell
# 下载 Anaconda
$ wget https://repo.anaconda.com/archive/Anaconda3-2023.07-2-Linux-x86_64.sh
# 运行安装脚本
$ bash Anaconda3-2023.07-2-Linux-x86_64.sh
# 激活 conda环境
$ source ~/.bashrc
```


### 使用

```shell
# 创建一个新的 python环境
$ conda create --name Segairway python=3.8
# 激活这个环境
$ conda activate Segairway
# 安装 Pytorch，版本不限制可不填
$ conda install pytorch torchvision torchaudio pytorch-cuda=11.8 -c pytorch -c nvidia
# 生成 Conda依赖文件
$ conda env export > environment.yaml
# 在新环境使用
$ conda env create -n <env> -f environment.yaml
```